---
phase: 22-tool-name-canonicalization-across-platforms
plan: 02
type: execute
wave: 2
depends_on: ["22-01"]
files_modified:
  - docs/TOOL-MAPPING.md
autonomous: true

must_haves:
  truths:
    - "A developer can look up the canonical tool name for any platform-specific tool name"
    - "The document clearly indicates confidence level for each platform's mappings"
    - "Unknown/unmapped tools are documented as passing through unchanged"
  artifacts:
    - path: "docs/TOOL-MAPPING.md"
      provides: "Cross-platform tool name mapping reference mirroring EVENT-MAPPING.md format"
      contains: "map_tool_name"
  key_links:
    - from: "docs/TOOL-MAPPING.md"
      to: "docs/EVENT-MAPPING.md"
      via: "Same table format and platform columns"
      pattern: "Claude Code.*Gemini CLI.*Copilot.*OpenCode"
---

<objective>
Create docs/TOOL-MAPPING.md documenting the canonical tool name mappings across all platforms, mirroring the format of docs/EVENT-MAPPING.md.

Purpose: Provides a single-source-of-truth reference for which platform tool names map to which canonical (Claude Code PascalCase) names. Essential for users writing cross-platform rules with `tools:` matchers.

Output: docs/TOOL-MAPPING.md with mapping tables, confidence notes, and pass-through behavior documented.
</objective>

<execution_context>
@/Users/richardhightower/.claude/get-shit-done/workflows/execute-plan.md
@/Users/richardhightower/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/22-tool-name-canonicalization-across-platforms/22-RESEARCH.md
@.planning/phases/22-tool-name-canonicalization-across-platforms/22-01-SUMMARY.md
@docs/EVENT-MAPPING.md (format reference)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create TOOL-MAPPING.md documentation</name>
  <files>docs/TOOL-MAPPING.md</files>
  <action>
Create `docs/TOOL-MAPPING.md` mirroring the format of `docs/EVENT-MAPPING.md`. Include:

1. **Header:** "# RuleZ Tool Name Mapping" with a one-line description.

2. **Tool Names table** with columns: Canonical (Claude Code) | Gemini CLI | Copilot | OpenCode

   Mappings from the finalized adapter code (use 22-01-SUMMARY.md as source of truth):

   | Canonical | Gemini CLI | Copilot | OpenCode |
   |-----------|-----------|---------|----------|
   | `Bash` | `run_shell_command`, `execute_code` | `shell` | `bash` |
   | `Write` | `write_file` | `write` | `write` |
   | `Edit` | `replace` | `edit` | `edit` |
   | `Read` | `read_file` | `read` | `read` |
   | `Glob` | `glob` | `glob` | `glob` |
   | `Grep` | `search_file_content`, `grep_search` | `grep` | `grep` |
   | `Task` | (pass-through) | `task` | `task` |
   | `WebFetch` | `web_fetch` | `fetch` | `webfetch`, `fetch` |

3. **Pass-Through Behavior** section: Explain that unknown tool names (MCP tools, platform-specific tools) pass through unchanged. No `platform_tool_name` is injected for pass-through tools.

4. **Platform Tool Name Preservation** section: Explain that when a tool name IS mapped, the original platform name is preserved in `tool_input.platform_tool_name`. This allows rules to inspect which platform issued the tool call.

5. **Confidence Notes** section:
   - Gemini CLI: MEDIUM — verified from geminicli.com/docs/tools/ (2026-02-20). `grep_search` vs `search_file_content` both mapped as aliases.
   - OpenCode: HIGH — verified from opencode.ai/docs/tools/.
   - Copilot: LOW — no official tool name documentation found. Mappings are best-effort inference.

6. **How It Works** section: Brief explanation that each adapter has a `map_tool_name()` function that normalizes platform names to canonical PascalCase at ingestion time. The hooks.rs matcher uses exact case-sensitive matching on canonical names. This means `tools: [Bash]` in a rule works across all platforms.

7. **Platform-Specific Tools** section: List platform tools that have no Claude Code equivalent and pass through unchanged:
   - Gemini: `list_directory`, `read_many_files`, `google_web_search`, `ask_user`, `save_memory`, `write_todos`, `activate_skill`
   - OpenCode: `list`, `lsp`, `patch`, `skill`, `todowrite`, `todoread`, `websearch`, `question`
   - Copilot: `TodoRead`, `TodoWrite` (PascalCase, pass through as-is)
  </action>
  <verify>
    File exists at `docs/TOOL-MAPPING.md`.
    File follows same column format as `docs/EVENT-MAPPING.md`.
    All 8 canonical tool names are listed.
    Confidence notes are present for each platform.
  </verify>
  <done>
    docs/TOOL-MAPPING.md exists with complete mapping tables, pass-through documentation, confidence notes, and platform-specific tool lists. Format mirrors EVENT-MAPPING.md.
  </done>
</task>

</tasks>

<verification>
1. `docs/TOOL-MAPPING.md` exists and is well-formed markdown
2. All canonical tool names from the 3 adapter `map_tool_name()` functions are documented
3. Confidence levels match research findings (Gemini MEDIUM, OpenCode HIGH, Copilot LOW)
4. Pass-through behavior is clearly documented
5. Format matches `docs/EVENT-MAPPING.md` style
</verification>

<success_criteria>
- docs/TOOL-MAPPING.md exists with complete cross-platform tool name mappings
- Document is clear enough that a user can look up any platform tool name and find its canonical equivalent
- Confidence levels for each platform's mappings are explicitly stated
- Pass-through behavior for unknown tools is documented
</success_criteria>

<output>
After completion, create `.planning/phases/22-tool-name-canonicalization-across-platforms/22-02-SUMMARY.md`
</output>
