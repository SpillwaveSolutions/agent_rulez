---
phase: 11-rename-fix-settings-foundation
plan: 03
type: execute
wave: 2
depends_on: ["11-02"]
files_modified:
  - rulez_ui/src/stores/uiStore.ts
  - rulez_ui/src/components/layout/RightPanel.tsx
  - rulez_ui/src/components/layout/Header.tsx
  - rulez_ui/src/components/settings/SettingsPanel.tsx
  - rulez_ui/src/App.tsx
  - rulez_ui/src/components/ui/ThemeToggle.tsx
  - rulez_ui/src/components/editor/YamlEditor.tsx
autonomous: true
must_haves:
  truths:
    - "Settings panel lets the user set theme, editor font size/tab size, and RuleZ binary path"
    - "Theme and editor preferences apply immediately when changed"
  artifacts:
    - path: "rulez_ui/src/components/settings/SettingsPanel.tsx"
      provides: "Settings UI for theme/editor/binary path"
    - path: "rulez_ui/src/components/layout/RightPanel.tsx"
      provides: "Settings tab entry point"
    - path: "rulez_ui/src/components/ui/ThemeToggle.tsx"
      provides: "Theme control bound to settings"
    - path: "rulez_ui/src/components/editor/YamlEditor.tsx"
      provides: "Editor options bound to settings"
  key_links:
    - from: "rulez_ui/src/components/settings/SettingsPanel.tsx"
      to: "rulez_ui/src/stores/settingsStore.ts"
      via: "setTheme/setEditorFontSize/setEditorTabSize/setRulezBinaryPath"
      pattern: "useSettingsStore"
    - from: "rulez_ui/src/stores/settingsStore.ts"
      to: "rulez_ui/src/components/editor/YamlEditor.tsx"
      via: "editor options"
      pattern: "fontSize|tabSize"
    - from: "rulez_ui/src/App.tsx"
      to: "rulez_ui/src/stores/settingsStore.ts"
      via: "initial settings load"
      pattern: "loadSettings"
---

<objective>
Add the settings panel UI and wire theme/editor preferences to the persisted settings store.

Purpose: Give users access to settings and apply preferences immediately in the UI.
Output: Settings tab UI, header entry point, and editor/theme wiring.
</objective>

<execution_context>
@/Users/richardhightower/.config/opencode/get-shit-done/workflows/execute-plan.md
@/Users/richardhightower/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/ROADMAP.md
@.planning/phases/11-rename-fix-settings-foundation/11-RESEARCH.md
@rulez_ui/src/stores/uiStore.ts
@rulez_ui/src/components/layout/RightPanel.tsx
@rulez_ui/src/components/layout/Header.tsx
@rulez_ui/src/components/ui/ThemeToggle.tsx
@rulez_ui/src/components/editor/YamlEditor.tsx
@rulez_ui/src/App.tsx
@rulez_ui/src/components/settings/SettingsPanel.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add settings panel entry points and layout</name>
  <files>rulez_ui/src/components/settings/SettingsPanel.tsx, rulez_ui/src/components/layout/RightPanel.tsx, rulez_ui/src/components/layout/Header.tsx, rulez_ui/src/stores/uiStore.ts</files>
  <action>Create a SettingsPanel component that edits theme (light/dark/system), editor font size, editor tab size, and RuleZ binary path using settingsStore setters. Add a Settings tab to the right panel (extend RightPanelTab in uiStore), and add a header button to open the Settings tab. Keep existing layout patterns intact.</action>
  <verify>Open the app UI and confirm the Settings tab renders the controls with the header button opening the tab.</verify>
  <done>Settings panel exists and is reachable via right panel tab and header control.</done>
</task>

<task type="auto">
  <name>Task 2: Apply settings to theme toggle and editor options</name>
  <files>rulez_ui/src/App.tsx, rulez_ui/src/components/ui/ThemeToggle.tsx, rulez_ui/src/components/editor/YamlEditor.tsx</files>
  <action>Load settings on app start and apply theme to the document. Update ThemeToggle and YamlEditor to read from settingsStore so theme and editor options apply immediately when changed.</action>
  <verify>Change theme and editor options in Settings; confirm the UI updates immediately and editor uses updated font and tab size.</verify>
  <done>Theme and editor preferences apply live through settingsStore bindings.</done>
</task>

</tasks>

<verification>
- Settings tab is reachable and exposes theme/editor/binary path controls.
- Theme and editor settings update immediately when changed.
</verification>

<success_criteria>
- Settings panel provides theme, editor preferences, and binary path configuration.
- Theme and editor preferences apply instantly through settingsStore wiring.
</success_criteria>

<output>
After completion, create `.planning/phases/11-rename-fix-settings-foundation/11-03-SUMMARY.md`
</output>
