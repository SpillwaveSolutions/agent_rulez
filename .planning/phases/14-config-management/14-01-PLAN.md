# Phase 14 Plan 01: Scope Indicators + Config Precedence UI

## Wave
Wave 1 (no dependencies on other Phase 14 plans)

## Objective
Add visual scope indicators to the sidebar and status bar so users can immediately see which config is active, which is overridden, and how precedence works. This addresses SC-1 (switch between configs with scope indicator) and SC-4 (precedence clearly indicated).

## Why This Plan Exists
The sidebar already shows Global and Project config sections, but there is no visual distinction between an active config and one that's overridden. Users need to understand that when a project config exists, it completely replaces the global config (no merging). This plan adds that clarity.

## Tasks

### Task 1: Add scope status to configStore
**File(s):**
- `rulez_ui/src/stores/configStore.ts` (MODIFY)

**Action:**
1. Add a derived getter `getActiveScope()` that returns:
   - `"project"` if `projectConfig` exists and `projectConfig.exists === true`
   - `"global"` if only `globalConfig` exists and `globalConfig.exists === true`
   - `"none"` if neither exists
2. Add a getter `getScopeInfo()` that returns an object:
   ```typescript
   interface ScopeInfo {
     activeScope: "project" | "global" | "none";
     globalStatus: "active" | "overridden" | "missing";
     projectStatus: "active" | "missing";
   }
   ```
   - If project exists: `{ activeScope: "project", globalStatus: "overridden", projectStatus: "active" }`
   - If only global: `{ activeScope: "global", globalStatus: "active", projectStatus: "missing" }`
   - If neither: `{ activeScope: "none", globalStatus: "missing", projectStatus: "missing" }`

**Acceptance:**
- `getScopeInfo()` returns correct values for all 3 scenarios
- `tsc --noEmit` passes

### Task 2: Add scope badges to Sidebar
**File(s):**
- `rulez_ui/src/components/layout/Sidebar.tsx` (MODIFY)

**Action:**
1. Import `getScopeInfo` from configStore
2. Next to each section header ("Global" / "Project"), add a badge:
   - **Active**: Small green badge text "Active" — indicates this config is being used by the CLI
   - **Overridden**: Small orange/amber badge text "Overridden" — indicates this config is ignored because a project config exists
   - **Missing**: No badge, but the "(new)" indicator already exists for non-existent files
3. Add a tooltip on the scope badge:
   - Active (project): "This project config takes priority over the global config"
   - Active (global): "No project config found — using this global config"
   - Overridden: "This global config is overridden by the project config"
4. Style badges with Tailwind: `text-xs px-1.5 py-0.5 rounded-full font-medium`
   - Active: `bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300`
   - Overridden: `bg-amber-100 text-amber-700 dark:bg-amber-900 dark:text-amber-300`

**Acceptance:**
- When both configs exist: Project shows "Active", Global shows "Overridden"
- When only global exists: Global shows "Active"
- Badges have correct colors in light and dark mode
- Tooltips explain precedence on hover
- `tsc --noEmit` passes

### Task 3: Add scope info to StatusBar
**File(s):**
- `rulez_ui/src/components/layout/StatusBar.tsx` (MODIFY)

**Action:**
1. Import `getScopeInfo` from configStore
2. Add a scope indicator section showing: "Config: Project" or "Config: Global" or "Config: None"
3. Use a colored dot or icon matching the sidebar badge colors
4. Make it clickable — clicking jumps to the active config file (calls `setActiveFile`)

**Acceptance:**
- Status bar shows the active config scope
- Clicking the scope indicator switches to the active config
- `tsc --noEmit` passes

## Verification
1. `cd rulez_ui && npx tsc --noEmit` — passes
2. `npx biome check src/stores/configStore.ts src/components/layout/Sidebar.tsx src/components/layout/StatusBar.tsx` — no errors
3. Visual: In browser dev mode, verify badges appear correctly in sidebar with both mock configs
