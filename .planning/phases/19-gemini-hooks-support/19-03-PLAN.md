---
phase: 19-gemini-hooks-support
plan: 03
type: execute
wave: 3
depends_on:
  - "19-01"
  - "19-02"
files_modified:
  - docs/GEMINI_CLI_HOOKS.md
  - docs/gemini-hooks.example.yaml
  - docs/README.md
autonomous: true

must_haves:
  truths:
    - "Users have a clear Gemini CLI hook installation guide with translation details."
    - "Example RuleZ rules demonstrate secret scanning and loop prevention for Gemini."
    - "Documentation links to the Gemini integration guide from docs index."
  artifacts:
    - path: "docs/GEMINI_CLI_HOOKS.md"
      provides: "Gemini integration guide and mapping reference"
    - path: "docs/gemini-hooks.example.yaml"
      provides: "Sample rules for secrets and loop guard"
    - path: "docs/README.md"
      provides: "Docs index links to Gemini guide"
  key_links:
    - from: "docs/GEMINI_CLI_HOOKS.md"
      to: "docs/gemini-hooks.example.yaml"
      via: "example rules reference"
      pattern: "gemini-hooks.example.yaml"
---

<objective>
Document the Gemini CLI integration, including installation, event mapping, and example rules for secret scanning and iterative loop prevention.

Purpose: Make Gemini hook support discoverable and usable by end users.
Output: Gemini integration guide, example rules, docs index update.
</objective>

<execution_context>
@/Users/richardhightower/.config/opencode/get-shit-done/workflows/execute-plan.md
@/Users/richardhightower/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md
@.planning/phases/19-gemini-hooks-support/19-RESEARCH.md
@docs/README.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Write Gemini CLI integration guide</name>
  <files>docs/GEMINI_CLI_HOOKS.md</files>
  <action>
Create a Gemini CLI guide that covers:
- Hook command usage (Gemini hook runner), strict stdout JSON expectations, and error handling.
- Event mapping table (Gemini events -> RuleZ EventType) and tool name normalization.
- Installation steps for project, user, system, and extension scopes with settings.json examples.
  </action>
  <verify>Manual review of docs/GEMINI_CLI_HOOKS.md for completeness</verify>
  <done>Guide includes install steps, mapping table, and JSON response schema details.</done>
</task>

<task type="auto">
  <name>Task 2: Add Gemini rule examples and index link</name>
  <files>docs/gemini-hooks.example.yaml, docs/README.md</files>
  <action>
Add an example YAML file with:
- Secret scanning rule using block_if_match on tool input content.
- Iterative loop guard rule ("Ralph loop") using a matcher pattern and block action.
Update docs/README.md to link the Gemini CLI guide.
  </action>
  <verify>Manual review of docs/gemini-hooks.example.yaml and docs/README.md</verify>
  <done>Docs index links to the Gemini guide and examples show both secret scanning and loop prevention.</done>
</task>

</tasks>

<verification>
- docs/GEMINI_CLI_HOOKS.md exists with install steps and mapping table
- docs/gemini-hooks.example.yaml contains secret scan + loop guard examples
- docs/README.md links to the Gemini guide
</verification>

<success_criteria>
- Users can follow the guide to install Gemini hooks and understand RuleZ mapping.
- Example rules cover secret scanning and iterative loop patterns.
</success_criteria>

<output>
After completion, create `.planning/phases/19-gemini-hooks-support/19-03-SUMMARY.md`
</output>
